// JS 5. SCROLL & NAV ACTIVE (ĐÃ FIX LỖI CUỘN HOME TRÊN MOBILE)
        const sections = document.querySelectorAll("section, footer"); 
        const navLinks = document.querySelectorAll(".nav-link");
        const navMenu = document.getElementById('nav-menu');
        const progressBar = document.getElementById('progress-bar');
        const btt = document.getElementById('backToTop');

        window.addEventListener("scroll", () => {
            const scrollPos = window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            const bodyHeight = document.documentElement.scrollHeight;
            progressBar.style.width = (scrollPos / (bodyHeight - windowHeight)) * 100 + "%";

            let current = "";
            sections.forEach((section) => {
                const sectionTop = section.offsetTop;
                if (scrollPos + windowHeight >= bodyHeight - 20) {
                    current = "contact";
                } else if (scrollPos >= sectionTop - 150) {
                    current = section.getAttribute("id");
                }
            });

            navLinks.forEach((link) => {
                link.classList.remove("active");
                if (link.getAttribute("href") === `#${current}`) {
                    link.classList.add("active");
                    
                    // FIX: TỰ ĐỘNG CUỘN THANH MENU THÔNG MINH
                    if (window.innerWidth < 768) {
                        if (current === "home") {
                            // Nếu là Home thì luôn về sát lề trái
                            navMenu.scrollTo({ left: 0, behavior: 'smooth' });
                        } else {
                            // Các mục khác tính toán để nằm giữa thanh menu
                            const menuWidth = navMenu.offsetWidth;
                            const linkLeft = link.offsetLeft;
                            const linkWidth = link.offsetWidth;
                            navMenu.scrollTo({
                                left: linkLeft - (menuWidth / 2) + (linkWidth / 2),
                                behavior: 'smooth'
                            });
                        }
                    }
                }
            });

            if (scrollPos > 400) btt.classList.add('show'); else btt.classList.remove('show');
        });
